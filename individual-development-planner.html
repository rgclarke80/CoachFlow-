<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Individual Development Plan</title>
    <style>
        .back-to-dashboard {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.95);
            color: #1a4d2e;
            padding: 12px 20px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .back-to-dashboard:hover {
            background: #4ade80;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(74, 222, 128, 0.3);
        }
        :root {
            --brand-red: #4ade80;
            --brand-black: #1a4d2e;
            --brand-white: #FFFFFF;
            --gray-50: #F5F5F5;
            --gray-200: #E0E0E0;
            --gray-500: #808080;
            --gray-900: #333333;
            --dark-gray: #0f2818;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #1a4d2e 0%, #0f2818 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .header p {
            color: #4ade80;
            font-size: 1.1rem;
        }

        .card {
            background: white;
            border-radius: 12px;
            padding: 35px;
            margin-bottom: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .section-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #4ade80;
        }

        .input-group {
            margin-bottom: 25px;
        }

        .input-label {
            display: block;
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: 8px;
            font-size: 1rem;
        }

        .input-hint {
            display: block;
            color: var(--gray-500);
            font-size: 0.85rem;
            margin-bottom: 10px;
            font-style: italic;
        }

        input[type="text"],
        input[type="number"],
        textarea,
        select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--gray-200);
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            background: var(--gray-50);
            transition: all 0.2s;
        }

        input:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: #4ade80;
            background: white;
            box-shadow: 0 0 0 3px rgba(74, 222, 128, 0.1);
        }

        textarea {
            min-height: 80px;
            resize: vertical;
        }

        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .option-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
        }

        .option-btn {
            padding: 12px 16px;
            border: 2px solid var(--gray-200);
            border-radius: 8px;
            background: var(--gray-50);
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
            font-weight: 500;
        }

        .option-btn:hover {
            border-color: #4ade80;
            background: white;
        }

        .option-btn.selected {
            border-color: #4ade80;
            background: rgba(74, 222, 128, 0.1);
            color: #1a4d2e;
            font-weight: 600;
        }

        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            padding: 10px;
            border: 2px solid var(--gray-200);
            border-radius: 6px;
            background: var(--gray-50);
            cursor: pointer;
            transition: all 0.2s;
        }

        .checkbox-item:hover {
            border-color: #4ade80;
            background: white;
        }

        .checkbox-item.selected {
            border-color: #4ade80;
            background: rgba(74, 222, 128, 0.05);
        }

        .checkbox-item input {
            margin-right: 8px;
            cursor: pointer;
        }

        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 8px;
            font-size: 1.05rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #000000, #4ade80);
            color: white;
            width: 100%;
            margin-top: 10px;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(74, 222, 128, 0.3);
        }

        .hidden {
            display: none;
        }

        .loading {
            text-align: center;
            padding: 60px;
            color: white;
        }

        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.2);
            border-top-color: #4ade80;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* IDP Output Styles */
        .idp-header {
            background: linear-gradient(135deg, #000000, #4ade80);
            color: white;
            padding: 35px;
            border-radius: 12px 12px 0 0;
        }

        .idp-header h2 {
            font-size: 2.2rem;
            margin-bottom: 5px;
        }

        .idp-header .player-info {
            font-size: 1.1rem;
            opacity: 0.95;
            margin-top: 8px;
        }

        .idp-content {
            background: white;
            padding: 35px;
            border-radius: 0 0 12px 12px;
        }

        .idp-objective {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border-left: 5px solid #f59e0b;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 30px;
        }

        .idp-objective h3 {
            color: #92400e;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .idp-objective p {
            color: #78350f;
            font-size: 1.1rem;
            line-height: 1.7;
            font-weight: 500;
        }

        .focus-area {
            background: var(--gray-50);
            border: 2px solid var(--gray-200);
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .focus-area-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 2px solid #e5e7eb;
        }

        .focus-icon {
            background: linear-gradient(135deg, #000000, #4ade80);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            flex-shrink: 0;
        }

        .focus-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #1a4d2e;
        }

        .focus-section {
            margin-bottom: 15px;
        }

        .focus-section h4 {
            color: var(--gray-900);
            font-size: 1rem;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .focus-section p,
        .focus-section li {
            color: var(--gray-500);
            line-height: 1.7;
        }

        .focus-section ul {
            margin-left: 20px;
        }

        .focus-section li {
            margin-bottom: 6px;
        }

        .habit-box {
            background: #dbeafe;
            border-left: 4px solid #3b82f6;
            padding: 15px;
            border-radius: 6px;
            margin-top: 12px;
        }

        .habit-box h4 {
            color: #1e40af;
            font-size: 0.95rem;
            margin-bottom: 8px;
        }

        .habit-box p {
            color: #1e3a8a;
            font-size: 0.95rem;
        }

        .match-cues {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 20px;
            border-radius: 8px;
            margin-top: 25px;
        }

        .match-cues h3 {
            color: #92400e;
            margin-bottom: 12px;
            font-size: 1.15rem;
        }

        .cue-list {
            list-style: none;
            padding: 0;
        }

        .cue-list li {
            color: #78350f;
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
            font-weight: 500;
        }

        .cue-list li::before {
            content: '‚ö°';
            position: absolute;
            left: 0;
            font-size: 1.1rem;
        }

        .checkpoint-section {
            background: #f0fdf4;
            border: 2px solid #86efac;
            border-radius: 10px;
            padding: 25px;
            margin-top: 25px;
        }

        .checkpoint-section h3 {
            color: #166534;
            margin-bottom: 15px;
        }

        .checkpoint {
            background: white;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 12px;
            border-left: 4px solid #22c55e;
        }

        .checkpoint h4 {
            color: #15803d;
            font-size: 1rem;
            margin-bottom: 6px;
        }

        .checkpoint p {
            color: #166534;
            font-size: 0.9rem;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 25px;
        }

        .btn-secondary {
            background: #e5e7eb;
            color: var(--gray-900);
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
        }

        .btn-secondary:hover {
            background: #d1d5db;
        }

        @media (max-width: 768px) {
            .two-column {
                grid-template-columns: 1fr;
            }
            .checkbox-grid {
                grid-template-columns: 1fr;
            }
        }
            /* Print Styles */
        @media print {
            body {
                background: white;
                padding: 20px;
            }
            .btn, button {
                display: none;
            }
            .card {
                box-shadow: none;
                border: 1px solid #ddd;
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <a href="coachflow-dashboard.html" class="back-to-dashboard">
        ‚Üê Back to Dashboard
    </a>
    <div class="container">
        <div class="header">
        <div style="background: rgba(74, 222, 128, 0.15); border-left: 4px solid #4ade80; padding: 15px; border-radius: 8px; margin: 20px auto; max-width: 900px; color: white;">
            <strong>üí° Quick Tip:</strong> Create personalized plans in 5 minutes. Perfect for parent meetings, player conferences, and goal-setting conversations.
        </div>
            <h1>üë§ Individual Development Planner</h1>
            <p>Create personalized growth plans for your players</p>
        </div>

        <div id="plannerForm">
            <div class="card">
                <div class="section-title">üìã Player Information</div>
                
                <div class="two-column">
                    <div class="input-group">
                        <label class="input-label">Player Name</label>
                        <input type="text" id="playerName" placeholder="e.g., Alex Martinez">
                    </div>

                    <div class="input-group">
                        <label class="input-label">Age</label>
                        <input type="number" id="age" placeholder="e.g., 14" min="8" max="25">
                    </div>
                </div>

                <div class="input-group">
                    <label class="input-label">Position</label>
                    <select id="position">
                        <option value="">Select position...</option>
                        <option value="Goalkeeper">Goalkeeper</option>
                        <option value="Center Back">Center Back</option>
                        <option value="Fullback">Fullback</option>
                        <option value="Defensive Midfielder">Defensive Midfielder</option>
                        <option value="Central Midfielder">Central Midfielder</option>
                        <option value="Attacking Midfielder">Attacking Midfielder</option>
                        <option value="Winger">Winger</option>
                        <option value="Forward">Forward</option>
                    </select>
                </div>

                <div class="input-group">
                    <label class="input-label">Role in Your Game Model</label>
                    <span class="input-hint">How does this player fit into your system?</span>
                    <textarea id="roleInModel" placeholder="e.g., As a central midfielder in our 4-3-3, they need to connect defense to attack, press intelligently, and support both phases..."></textarea>
                </div>
            </div>

            <div class="card">
                <div class="section-title">üí™ Current Strengths</div>
                
                <div class="input-group">
                    <label class="input-label">What does this player do well?</label>
                    <span class="input-hint">Select all that apply</span>
                    <div class="checkbox-grid" id="strengthsGrid">
                        <div class="checkbox-item">
                            <input type="checkbox" value="First touch" id="s1">
                            <label for="s1">First touch</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" value="Passing accuracy" id="s2">
                            <label for="s2">Passing accuracy</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" value="Decision-making" id="s3">
                            <label for="s3">Decision-making</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" value="1v1 defending" id="s4">
                            <label for="s4">1v1 defending</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" value="Speed" id="s5">
                            <label for="s5">Speed</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" value="Work rate" id="s6">
                            <label for="s6">Work rate</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" value="Communication" id="s7">
                            <label for="s7">Communication</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" value="Shooting" id="s8">
                            <label for="s8">Shooting</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" value="Heading" id="s9">
                            <label for="s9">Heading</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" value="Dribbling" id="s10">
                            <label for="s10">Dribbling</label>
                        </div>
                    </div>
                </div>

                <div class="input-group">
                    <label class="input-label">Additional Strengths</label>
                    <span class="input-hint">Anything else they excel at?</span>
                    <textarea id="additionalStrengths" placeholder="e.g., Great at reading the game, natural leader, calm under pressure..."></textarea>
                </div>
            </div>

            <div class="card">
                <div class="section-title">üéØ Areas to Develop</div>
                
                <div class="input-group">
                    <label class="input-label">What should this player work on?</label>
                    <span class="input-hint">Select 2-3 priority areas (don't overwhelm them!)</span>
                    <div class="checkbox-grid" id="developmentGrid">
                        <div class="checkbox-item">
                            <input type="checkbox" value="Weaker foot" id="d1">
                            <label for="d1">Weaker foot</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" value="Defensive positioning" id="d2">
                            <label for="d2">Defensive positioning</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" value="Receiving under pressure" id="d3">
                            <label for="d3">Receiving under pressure</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" value="Aerial ability" id="d4">
                            <label for="d4">Aerial ability</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" value="Finishing" id="d5">
                            <label for="d5">Finishing</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" value="Tactical awareness" id="d6">
                            <label for="d6">Tactical awareness</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" value="Aggression/intensity" id="d7">
                            <label for="d7">Aggression/intensity</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" value="Confidence" id="d8">
                            <label for="d8">Confidence</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" value="Speed of play" id="d9">
                            <label for="d9">Speed of play</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" value="Off-ball movement" id="d10">
                            <label for="d10">Off-ball movement</label>
                        </div>
                    </div>
                </div>

                <div class="input-group">
                    <label class="input-label">Specific Development Notes</label>
                    <span class="input-hint">Any specific situations or patterns you've noticed?</span>
                    <textarea id="developmentNotes" placeholder="e.g., Hesitates when pressed on their left side, needs to scan more before receiving..."></textarea>
                </div>
            </div>

            <div class="card">
                <div class="section-title">üí¨ Player Input</div>
                
                <div class="input-group">
                    <label class="input-label">What does the player want to improve?</label>
                    <span class="input-hint">Their personal goals (ask them!)</span>
                    <textarea id="playerGoals" placeholder="e.g., I want to be more confident taking players on 1v1, score more goals..."></textarea>
                </div>

                <div class="input-group">
                    <label class="input-label">Development Timeline</label>
                    <div class="option-group">
                        <div class="option-btn" data-value="4 weeks">4 Weeks</div>
                        <div class="option-btn" data-value="8 weeks">8 Weeks</div>
                        <div class="option-btn" data-value="Season">Full Season</div>
                    </div>
                    <input type="hidden" id="timeline" value="">
                </div>
            </div>

            <button class="btn btn-primary" id="generateBtn">‚ö° Generate Development Plan</button>
        </div>

        <div id="loading" class="loading hidden">
            <div class="spinner"></div>
            <p>Creating personalized development plan...</p>
        </div>

        <div id="idpOutput" class="hidden">
            <!-- Generated IDP will appear here -->
        </div>
    </div>

    <script>
        let inputs = {};

        // Checkbox item handlers
        document.querySelectorAll('.checkbox-item').forEach(item => {
            item.onclick = function() {
                const checkbox = this.querySelector('input[type="checkbox"]');
                checkbox.checked = !checkbox.checked;
                this.classList.toggle('selected');
            };
        });

        // Option button handlers
        document.querySelectorAll('.option-btn').forEach(btn => {
            btn.onclick = function() {
                const group = this.parentElement;
                const inputId = group.nextElementSibling.id;
                
                group.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
                this.classList.add('selected');
                
                document.getElementById(inputId).value = this.getAttribute('data-value');
            };
        });

        // Generate button
        document.getElementById('generateBtn').onclick = function() {
            // Collect inputs
            inputs.playerName = document.getElementById('playerName').value;
            inputs.age = document.getElementById('age').value;
            inputs.position = document.getElementById('position').value;
            inputs.roleInModel = document.getElementById('roleInModel').value;
            
            inputs.strengths = Array.from(document.querySelectorAll('#strengthsGrid input:checked')).map(cb => cb.value);
            inputs.additionalStrengths = document.getElementById('additionalStrengths').value;
            
            inputs.development = Array.from(document.querySelectorAll('#developmentGrid input:checked')).map(cb => cb.value);
            inputs.developmentNotes = document.getElementById('developmentNotes').value;
            
            inputs.playerGoals = document.getElementById('playerGoals').value;
            inputs.timeline = document.getElementById('timeline').value;

            // Validate
            if (!inputs.playerName || !inputs.age || !inputs.position || !inputs.timeline) {
                alert('Please fill in player name, age, position, and timeline');
                return;
            }

            if (inputs.development.length === 0) {
                alert('Please select at least one area to develop');
                return;
            }

            // Show loading
            document.getElementById('plannerForm').classList.add('hidden');
            document.getElementById('loading').classList.remove('hidden');

            // Generate IDP
            setTimeout(() => {
                generateIDP();
            }, 2000);
        };

        function generateIDP() {
            // Save to localStorage
            const activePlayers = JSON.parse(localStorage.getItem("activePlayers") || "[]");
            activePlayers.push({ name: data.playerName, position: data.position, date: new Date().toISOString() });
            if (activePlayers.length > 20) activePlayers.shift();
            localStorage.setItem("activePlayers", JSON.stringify(activePlayers));
            const idp = createIDP(inputs);
            document.getElementById('idpOutput').innerHTML = idp;
            document.getElementById('loading').classList.add('hidden');
            document.getElementById('idpOutput').classList.remove('hidden');
        }

        function createIDP(data) {
            // Create development objective
            const primaryFocus = data.development.slice(0, 2).join(' and ');
            const objective = `Over the next ${data.timeline.toLowerCase()}, develop ${primaryFocus.toLowerCase()} to become more effective in the ${data.position.toLowerCase()} role${data.roleInModel ? ', specifically in how they ' + data.roleInModel.split(',')[0].toLowerCase() : ''}.`;

            // Generate focus areas (max 3)
            const focusAreas = generateFocusAreas(data);

            // Generate match-day cues
            const matchCues = generateMatchCues(data);

            // Generate checkpoints
            const checkpoints = generateCheckpoints(data);

            return `
                <div class="card" style="padding: 0; overflow: hidden;">
                    <div class="idp-header">
                        <h2>Individual Development Plan</h2>
                        <div class="player-info">
                            <strong>${data.playerName}</strong> ‚Ä¢ ${data.position} ‚Ä¢ Age ${data.age} ‚Ä¢ ${data.timeline}
                        </div>
                    </div>
                    
                    <div class="idp-content">
                        <div class="idp-objective">
                            <h3>üéØ Development Objective</h3>
                            <p>${objective}</p>
                        </div>

                        ${focusAreas}

                        <div class="match-cues">
                            <h3>‚öΩ Match-Day Focus Cues</h3>
                            <p style="margin-bottom: 12px; color: #78350f;">Simple reminders to keep in mind during games:</p>
                            <ul class="cue-list">
                                ${matchCues.map(cue => `<li>${cue}</li>`).join('')}
                            </ul>
                        </div>

                        <div class="checkpoint-section">
                            <h3>üìÖ Progress Checkpoints</h3>
                            <p style="color: #166534; margin-bottom: 15px;">Coach and player will review together at these milestones:</p>
                            ${checkpoints}
                        </div>

                        <div class="action-buttons">
                            <button class="btn btn-primary" onclick="downloadIDP()">üì• Download</button>
                            <button class="btn btn-secondary" onclick="window.print()" style="margin-left: 10px;">üñ®Ô∏è Print Development Plan</button>
                            <button class="btn-secondary" onclick="location.reload()">Create New Plan</button>
                        </div>
                    </div>
                </div>
            `;
        }

        function generateFocusAreas(data) {
            const areas = data.development.slice(0, 3); // Max 3 focus areas
            const icons = ['‚öΩ', 'üß†', 'üí™', 'üéØ'];
            
            let html = '';
            
            areas.forEach((area, index) => {
                const details = getFocusAreaDetails(area, data.position, data.roleInModel);
                
                html += `
                    <div class="focus-area">
                        <div class="focus-area-header">
                            <div class="focus-icon">${icons[index]}</div>
                            <div class="focus-title">${details.title}</div>
                        </div>

                        <div class="focus-section">
                            <h4>Why This Matters</h4>
                            <p>${details.why}</p>
                        </div>

                        <div class="focus-section">
                            <h4>What to Work On</h4>
                            <ul>
                                ${details.whatToWorkOn.map(item => `<li>${item}</li>`).join('')}
                            </ul>
                        </div>

                        <div class="focus-section">
                            <h4>In Training Sessions</h4>
                            <p>${details.inTraining}</p>
                        </div>

                        <div class="habit-box">
                            <h4>üí° Daily Micro-Habit</h4>
                            <p>${details.microHabit}</p>
                        </div>
                    </div>
                `;
            });
            
            return html;
        }

        function getFocusAreaDetails(area, position, role) {
            const details = {
                'Weaker foot': {
                    title: 'Weaker Foot Development',
                    why: 'Being two-footed makes you unpredictable and opens up more passing and dribbling options. Defenders can\'t force you to one side.',
                    whatToWorkOn: [
                        'Passing accuracy with weaker foot (short and long)',
                        'First touch control when receiving on weaker side',
                        'Shooting technique and confidence',
                        'Turning and dribbling on weaker side'
                    ],
                    inTraining: 'During possession drills, actively choose to use your weaker foot even when your strong foot is available. In shooting practice, take 60% of attempts with your weaker foot.',
                    microHabit: '10 minutes of wall passing with weaker foot before every training session (100 touches minimum)'
                },
                'Defensive positioning': {
                    title: 'Defensive Positioning & Shape',
                    why: `As a ${position}, your positioning determines whether the team stays compact or gets exposed. Good positioning prevents chances before they happen.`,
                    whatToWorkOn: [
                        'Reading opponent\'s body language and intentions',
                        'Understanding when to press vs when to hold position',
                        'Maintaining proper distance from nearest teammate (compactness)',
                        'Recognizing dangerous spaces to protect'
                    ],
                    inTraining: 'In defensive drills, focus on where you are in relation to ball, goal, and teammates. Ask yourself: "Am I protecting the most dangerous space right now?"',
                    microHabit: 'Watch 5 minutes of professional matches focusing ONLY on your position\'s defensive movement (ignore the ball)'
                },
                'Receiving under pressure': {
                    title: 'Receiving & Controlling Under Pressure',
                    why: 'The ability to receive and control the ball cleanly under pressure is what separates good players from great ones. It keeps attacks alive.',
                    whatToWorkOn: [
                        'Scanning before the ball arrives (check shoulder 2x)',
                        'Body shape open to the field',
                        'First touch that takes you away from pressure',
                        'Shielding the ball with your body'
                    ],
                    inTraining: 'In rondos and possession games, demand the ball in tight spaces. Practice taking your first touch with the outside of your foot to open up.',
                    microHabit: 'Before receiving in any drill, force yourself to check over both shoulders. Make it automatic.'
                },
                'Finishing': {
                    title: 'Clinical Finishing',
                    why: 'Goals win games. Developing composure and technique in front of goal directly impacts results and your confidence as a player.',
                    whatToWorkOn: [
                        'Technique: placement over power',
                        'Head up before shooting (pick your spot)',
                        'First-time finishing in the box',
                        'Confidence to shoot in traffic'
                    ],
                    inTraining: 'During finishing drills, visualize exactly where you want the ball to go before striking it. Stay for extra shooting practice after training.',
                    microHabit: '20 quality finishes after every training session (focus on placement and technique, not power)'
                },
                'Tactical awareness': {
                    title: 'Tactical Awareness & Decision-Making',
                    why: `Understanding when and where to move, when to pass vs dribble, and how to exploit space separates smart players from reactive ones.`,
                    whatToWorkOn: [
                        'Recognizing patterns in opponent\'s play',
                        'Knowing when to play quickly vs when to slow down',
                        'Understanding space: where is it and how to use it',
                        'Anticipating next action (always thinking one step ahead)'
                    ],
                    inTraining: 'During small-sided games, talk through your decisions out loud. "I\'m checking away to create space." "They\'re pressing high, so we can play over."',
                    microHabit: 'After each training or match, write down 1 moment where you made a good decision and 1 where you could have chosen better'
                },
                'Confidence': {
                    title: 'Confidence & Mental Strength',
                    why: 'Your technical ability only shows when you have the confidence to use it. Mental strength helps you bounce back from mistakes and perform under pressure.',
                    whatToWorkOn: [
                        'Positive self-talk (replace "don\'t mess up" with "I\'ve done this before")',
                        'Quick recovery from mistakes (next play mentality)',
                        'Taking risks in training to build game confidence',
                        'Focusing on what you can control'
                    ],
                    inTraining: 'Volunteer to take penalties and free kicks in training. Demand the ball in important moments. The more you do it in training, the easier it becomes in games.',
                    microHabit: 'Write down 3 things you did well after every training/match (focus on the positive)'
                },
                'Speed of play': {
                    title: 'Speed of Play & Quick Decisions',
                    why: 'Modern soccer is fast. The quicker you can receive, decide, and execute, the more effective you become and the more time you create for teammates.',
                    whatToWorkOn: [
                        'Scanning constantly (before receiving the ball)',
                        'Limiting touches when appropriate (1-2 touch play)',
                        'Playing forward when possible',
                        'Recognizing when to play quickly vs when to slow down'
                    ],
                    inTraining: 'Challenge yourself: in possession drills, try to play 1-touch whenever safe. In transition moments, ask "can I go forward?" before recycling.',
                    microHabit: 'In every drill, scan your surroundings twice before the ball arrives. Make it a non-negotiable habit.'
                },
                'Off-ball movement': {
                    title: 'Movement Off the Ball',
                    why: `As a ${position}, your movement creates space for others and makes you available to receive. The best players are always moving with purpose.`,
                    whatToWorkOn: [
                        'Timing of runs (too early = offside, too late = missed opportunity)',
                        'Creating angles for teammates to pass to you',
                        'Movement to drag defenders away from dangerous areas',
                        'Recognizing when to check away vs when to check to ball'
                    ],
                    inTraining: 'Watch how defenders react to your movement. If you check to the ball, does space open behind you? Use movement as a weapon, not just to receive.',
                    microHabit: 'Count how many runs you make in a game (even if you don\'t get the ball). Set a target and try to beat it next game.'
                },
                'Aerial ability': {
                    title: 'Aerial Presence & Heading',
                    why: 'Winning aerial duels in both boxes can be game-changing. Whether defending set pieces or attacking crosses, aerial ability is a weapon.',
                    whatToWorkOn: [
                        'Timing your jump (attack the ball at its highest point)',
                        'Upper body strength and core stability',
                        'Eyes open, contact on forehead',
                        'Body positioning before the jump (get in front of opponent)'
                    ],
                    inTraining: 'During crossing practice, focus on attacking the ball aggressively. Don\'t wait for it to come to you‚Äîmeet it at the highest point.',
                    microHabit: '50 headers against a wall or with a partner after training (focus on technique: eyes open, forehead contact, neck muscles tight)'
                },
                'Aggression/intensity': {
                    title: 'Competitive Intensity',
                    why: 'Playing with intensity shows respect for the game and your teammates. It makes you harder to play against and sets the tone for those around you.',
                    whatToWorkOn: [
                        'First to every loose ball',
                        'Vocal leadership and communication',
                        'Winning 50-50 challenges',
                        'Never letting your head drop after mistakes'
                    ],
                    inTraining: 'Set a standard: every drill, every rep, compete like it\'s a final. Your training intensity becomes your game intensity.',
                    microHabit: 'Before every training and game, set one intensity goal: "I will win every 50-50" or "I will communicate loudly for 90 minutes"'
                }
            };

            return details[area] || {
                title: area,
                why: `Developing ${area.toLowerCase()} will make you more effective in your role as a ${position}.`,
                whatToWorkOn: ['Technical execution', 'Game understanding', 'Consistent application'],
                inTraining: `Focus on applying ${area.toLowerCase()} in every drill and game situation.`,
                microHabit: `Dedicate 10 minutes daily to specifically working on ${area.toLowerCase()}.`
            };
        }

        function generateMatchCues(data) {
            const position = data.position;
            const development = data.development;
            const cues = [];

            // Position-specific cues
            if (position.includes('Midfielder')) {
                cues.push('Scan twice before receiving (check both shoulders)');
            } else if (position.includes('Fullback') || position.includes('Winger')) {
                cues.push('Get high and wide when we have the ball');
            } else if (position.includes('Forward')) {
                cues.push('Time your runs‚Äîmake defenders make decisions');
            } else if (position.includes('Center Back')) {
                cues.push('Communicate constantly‚Äîorganize the defense');
            }

            // Development-specific cues
            if (development.includes('Weaker foot')) {
                cues.push('Trust your weaker foot‚Äîuse it confidently');
            }
            if (development.includes('Receiving under pressure')) {
                cues.push('Body shape open, first touch away from pressure');
            }
            if (development.includes('Tactical awareness') || development.includes('Speed of play')) {
                cues.push('Think one step ahead‚Äîwhat\'s the next action?');
            }
            if (development.includes('Confidence')) {
                cues.push('Play your game‚Äîdon\'t hide from the ball');
            }

            // Generic but important cue
            cues.push('Recover quickly from mistakes‚Äînext play mentality');

            return cues.slice(0, 4); // Max 4 cues
        }

        function generateCheckpoints(data) {
            const timeline = data.timeline;
            let checkpoints = '';

            if (timeline === '4 weeks') {
                checkpoints = `
                    <div class="checkpoint">
                        <h4>Week 2 Check-in</h4>
                        <p>Are the micro-habits becoming routine? Any adjustments needed? Celebrate small wins.</p>
                    </div>
                    <div class="checkpoint">
                        <h4>Week 4 Review</h4>
                        <p>Assess progress on focus areas. What improved? What still needs work? Set goals for next cycle.</p>
                    </div>
                `;
            } else if (timeline === '8 weeks') {
                checkpoints = `
                    <div class="checkpoint">
                        <h4>Week 3 Check-in</h4>
                        <p>Early progress check. Are habits sticking? Any barriers to address?</p>
                    </div>
                    <div class="checkpoint">
                        <h4>Week 5-6 Mid-Point Review</h4>
                        <p>Halfway assessment. Adjust focus areas if needed based on progress and game demands.</p>
                    </div>
                    <div class="checkpoint">
                        <h4>Week 8 Final Review</h4>
                        <p>Comprehensive review. What improved? Set new goals for next development cycle.</p>
                    </div>
                `;
            } else { // Full season
                checkpoints = `
                    <div class="checkpoint">
                        <h4>Month 1 Check-in</h4>
                        <p>Early foundations. Are habits forming? Making progress on focus areas?</p>
                    </div>
                    <div class="checkpoint">
                        <h4>Mid-Season Review</h4>
                        <p>Comprehensive assessment. What's improved? Any new development needs emerging?</p>
                    </div>
                    <div class="checkpoint">
                        <h4>End of Season Evaluation</h4>
                        <p>Full season review. Celebrate growth. Identify off-season development priorities.</p>
                    </div>
                `;
            }

            return checkpoints;
        }

        function downloadIDP() {
            const content = document.getElementById('idpOutput').innerHTML;
            const html = `<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>IDP - ${inputs.playerName}</title>
    <style>
        .back-to-dashboard {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.95);
            color: #1a4d2e;
            padding: 12px 20px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .back-to-dashboard:hover {
            background: #4ade80;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(74, 222, 128, 0.3);
        }
        :root {
            --brand-red: #4ade80;
            --brand-black: #1a4d2e;
            --brand-white: #FFFFFF;
            --gray-50: #F5F5F5;
            --gray-200: #E0E0E0;
            --gray-500: #808080;
            --gray-900: #333333;
            --dark-gray: #0f2818;
        }

        body { font-family: Arial, sans-serif; max-width: 900px; margin: 20px auto; padding: 20px; line-height: 1.6; }
        h2, h3, h4 { color: #1a4d2e; }
        .focus-area { background: var(--gray-50); border: 2px solid var(--gray-200); padding: 20px; margin-bottom: 20px; border-radius: 8px; }
        .habit-box { background: #dbeafe; border-left: 4px solid #3b82f6; padding: 15px; margin-top: 12px; border-radius: 6px; }
        .match-cues { background: #fef3c7; border-left: 4px solid #f59e0b; padding: 20px; margin-top: 20px; border-radius: 6px; }
        ul { margin-left: 20px; }
            /* Print Styles */
        @media print {
            body {
                background: white;
                padding: 20px;
            }
            .btn, button {
                display: none;
            }
            .card {
                box-shadow: none;
                border: 1px solid #ddd;
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <a href="coachflow-dashboard.html" class="back-to-dashboard">
        ‚Üê Back to Dashboard
    </a>
    <div style="text-align: center; padding: 20px 0; border-bottom: 3px solid #4ade80; margin-bottom: 30px;">
        <h1 style="color: #1a4d2e; margin-bottom: 5px;">‚öΩ COACHFLOW</h1>
        <p style="color: #666; font-size: 0.9rem;">Where philosophy becomes performance</p>
        <h2 style="margin-top: 15px;">Individual Development Plan</h2>
    </div>
    <p><strong>${inputs.playerName}</strong> ‚Ä¢ ${inputs.position} ‚Ä¢ Age ${inputs.age}</p>
    <p><strong>Timeline:</strong> ${inputs.timeline}</p>
    <p><strong>Created:</strong> ${new Date().toLocaleDateString()}</p>
    <hr>
    ${content}
</body>
</html>`;
            
            const blob = new Blob([html], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `IDP-${inputs.playerName.replace(/\s+/g, '-')}.html`;
            a.click();
            URL.revokeObjectURL(url);
        }
            function printPage() {
            window.print();
        }
    </script>
</body>
</html>